{"changed":true,"filter":false,"title":"ig_Schema.sql","tooltip":"/10.Instagram/ig_Schema.sql","value":"\nDROP DATABASE ig_clone;\nCREATE DATABASE ig_clone;\nUSE ig_clone;\n\nCREATE TABLE users (\n    id INTEGER AUTO_INCREMENT PRIMARY KEY,\n    username VARCHAR(255) UNIQUE NOT NULL,\n    created_at TIMESTAMP DEFAULT NOW()\n);\n\nCREATE TABLE photos (\n    id INTEGER AUTO_INCREMENT PRIMARY KEY,\n    image_url VARCHAR(255) NOT NULL,\n    user_id INTEGER NOT NULL,\n    created_at TIMESTAMP DEFAULT NOW(),\n    FOREIGN KEY(user_id) REFERENCES users(id)\n);\n\nCREATE TABLE comments (\n    id INTEGER AUTO_INCREMENT PRIMARY KEY,\n    comment_text VARCHAR(255) NOT NULL,\n    user_id INTEGER NOT NULL,\n    photo_id INTEGER NOT NULL,\n    created_at TIMESTAMP DEFAULT NOW(),\n    FOREIGN KEY(user_id) REFERENCES users(id),\n    FOREIGN KEY(photo_id) REFERENCES photos(id)\n);\n\nCREATE TABLE likes (\n    user_id INTEGER NOT NULL,\n    photo_id INTEGER NOT NULL,\n    created_at TIMESTAMP DEFAULT NOW(),\n    FOREIGN KEY(user_id) REFERENCES users(id),\n    FOREIGN KEY(photo_id) REFERENCES photos(id),\n    PRIMARY KEY(user_id, photo_id)\n);\n\nCREATE TABLE follows (\n    follower_id INTEGER NOT NULL,\n    followee_id INTEGER NOT NULL,\n    created_at TIMESTAMP DEFAULT NOW(),\n    FOREIGN KEY (follower_id) REFERENCES users(id),\n    FOREIGN KEY (followee_id) REFERENCES users(id),\n    PRIMARY KEY(follower_id, followee_id)\n);\n\nCREATE TABLE tags (\n    id INTEGER AUTO_INCREMENT PRIMARY KEY,\n    tag_name VARCHAR(255) UNIQUE,\n    created_at TIMESTAMP DEFAULT NOW()\n);\n\nCREATE TABLE photo_tags (\n    photo_id INTEGER NOT NULL,\n    tag_id INTEGER NOT NULL,\n    FOREIGN KEY(photo_id) REFERENCES photos(id),\n    FOREIGN KEY(tag_id) REFERENCES tags(id),\n    PRIMARY KEY(photo_id, tag_id)\n);\n\n\nINSERT INTO users (username) VALUES\n('BlueTheCat'), \n('CharlieBrown'),\n('ColtSteele');\n\nINSERT INTO photos (image_url, user_id) VALUES\n('/alskjd76', 1),\n('/lkajsd98', 2),\n('/90jddlkj', 2);\n\nINSERT INTO comments(comment_text, user_id, photo_id) VALUES\n('Meow!', 1, 2),\n('Amazing Shot!', 3, 2),\n('I <3 This', 2, 1);\n\nINSERT INTO likes(user_id, photo_id) VALUES\n(1,1),\n(2,1),\n(1,2),\n(1,3),\n(3,3);\n\nINSERT INTO follows(follower_id, followee_id) VALUES\n(1,2),\n(1,3),\n(3,1),\n(2,3);\n\nINSERT INTO tags(tag_name) VALUES \n('adorable'),\n('cute'),\n('sunrise');\n\nINSERT INTO photo_tags (photo_id, tag_id) VALUES\n(1,1),\n(1,2),\n(2,3),\n(3,2);\n\n\n-- http://tagging.pui.ch/post/37027746608/tagsystems-performance-tests\n\n-- Won't work because of primary key constraint\n-- INSERT INTO likes(user_id, photo_id) VALUES (1,1);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n-- SELECT photos.image_url, users.username\n-- FROM photos\n-- JOIN users\n--     ON photos.user_id = users.id;\n","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":16,"state":"start","mode":"ace/mode/sql"}},"timestamp":1554645297379}